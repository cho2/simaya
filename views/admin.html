<script src="/js/dashboard{{dashboardType}}.js"></script>
<link href="/css/dashboard.css" rel="stylesheet" />
<link href="/css/colors.css" rel="stylesheet" />
<link href="/css/chart.css" rel="stylesheet" />

<script src="/lib/jquery.easy-pie-chart.min.js"></script>
<script src="/lib/excanvas.min.js"></script>
<script src="/lib/jquery.flot.js"></script>
<script src="/lib/jquery.flot.resize.js"></script>
<script src="/lib/jquery.flot.pie.js"></script>
<script src="/lib/jquery.flot.stack.js"></script>


{{dashboardType}}
<div class="page-head">
  <h2 class="pull-left">Dasbor</h2>
  <div class="clearfix"></div>
</div>

<div class="matter">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span12"> 
        <ul class="today-datas">
          <li class="bred">
            <div class="pull-left"><i class="icon-user"></i></div>
            <div class="datas-text pull-right"><span class="bold">{{usersCount}}</span> Pengguna</div>
            <div class="clearfix"></div>
          </li>
          <li class="bgreen">
            <div class="pull-left"><i class="icon-user"></i></div>
            <div class="datas-text pull-right"><span class="bold">{{sessionsCount}}</span> Online</div>
            <div class="clearfix"></div>
          </li> 
          <li class="blightblue">
            <div class="pull-left"><i class="icon-group"></i></div>
            <div class="datas-text pull-right"><span class="bold">{{orgsCount}}</span> Instansi</div>
            <div class="clearfix"></div>
          </li> 
          <li class="bblue">
            <div class="pull-left"><i class="icon-envelope-alt"></i></div>
            <div class="datas-text pull-right"><span class="bold" id="letter-stat">...</span> Surat</div>
            <div class="clearfix"></div>
          </li> 
          <li class="bblue">
            <div class="pull-left"><i class="icon-envelope"></i></div>
            <div class="datas-text pull-right"><span class="bold" id="letter-today-stat">...</span> Hari Ini</div>
            <div class="clearfix"></div>
          </li> 
        </ul>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span4">
        <div class="widget wviolet">
          <div class="widget-head">
            <div class="pull-left">Penggunaan Disk</div>
            <div class="widget-icons pull-right">
              <a href="#" class="wminimize"><i class="icon-chevron-up"></i></a> 
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="widget-content">
            <div class="padd">
              <div id="disk-usage" class="pie-chart"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="span6">
        <div class="widget wviolet">
          <div class="widget-head">
            <div class="pull-left">Informasi Server</div>
            <div class="widget-icons pull-right">
              <a href="#" class="wminimize"><i class="icon-chevron-up"></i></a> 
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="widget-content">
              <table class="table table-bordered">
                <tbody><tr>
                  <td>Domain</td>
                  <td>{{ serverStatus.domain }}</td>
                </tr> 
                <tr>
                  <td>IP Address</td>
                  <td>{{ serverStatus.ipAddress }}</td>
                </tr> 
                <tr>
                  <td>Uptime</td>
                  <td>{{ serverStatus.uptime }}</td>
                </tr> 
                <tr>
                  <td>Total Memory</td>
                  <td>{{ serverStatus.totalMemory }}</td>
                </tr> 
                <tr>
                  <td>Free Memory</td>
                  <td>{{ serverStatus.freeMemory }}</td>
                </tr> 
              </tbody></table>
              {{#diskData}}
                {{data}}
              {{/diskData}}
          </div>
        </div>
      </div>
    </div>
    <div class="widget-foot">
    </div>
  </div> 
</div>
<script>
var loadLetterStat = function() {
  $.ajax({
    url: "/api/4/dashboard/stats/letter"
  }).success(function(data) {
    if (data && data.type && data.type == "letter-stat") {
      $("#letter-stat").text(data.count);
    }
  });

  $.ajax({
    url: "/api/4/dashboard/stats/letter/today"
  }).success(function(data) {
    if (data && data.type && data.type == "letter-stat") {
      $("#letter-today-stat").text(data.count);
    }
  });

}
$(document).ready(function() {
  loadLetterStat();
});
</script>
